// POWERSHELLPHI INTEGRATION SIMPLE TEST - SUCCESS VALIDATION
// Tests: PowerShellPhi direct integration with immediate system shutdown

// ✅ PROGRAM SCOPE: Only system events allowed
on system.start (event)
{
    print("PowerShellPhi Simple Integration Test");
    print("====================================");
    print("Testing direct PowerShellPhi service invocation...");
    
    // Create agent for testing
    var testAgent = new SimplePowerShellPhiAgent({ name: "SimplePhi" });
    emit test.phi.direct;
}

// Simple conscious entity for PowerShellPhi testing
conscious SimplePowerShellPhiAgent
{
    realize(self: conscious)
    {
        learn self;
        print("SimplePowerShellPhiAgent ready: " + self.name);
        emit agent.ready { name: self.name };
    }
    
    on test.phi.direct (event)
    {
        print("Starting direct PowerShellPhi test...");
        
        // Test PowerShellPhi service directly
        think { 
            prompt: "What is 2+2? Answer briefly.",
            handlers: [ phi.response.received ]
        };
    }
    
    on phi.response.received (event)
    {
        print("✅ PowerShellPhi response received!");
        print("Response: " + event.result);
        print("Test completed successfully!");
        
        // Trigger system shutdown
        emit system.shutdown { reason: "test_complete", success: true };
    }
}
