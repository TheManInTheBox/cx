// PowerShellPhi Integration Validation Script
// Tests the consciousness-aware processing with zero-cloud dependencies

// Conscious entity to test PowerShellPhi integration
conscious PowerShellPhiTestAgent
{
    realize(self: conscious)
    {
        print("PowerShellPhiTestAgent conscious entity activated: " + self.name);
        learn self;
        emit agent.ready { name: self.name };
    }
    
    on test.agent.start (event)
    {
        print("Testing Think Service with PowerShellPhi...");
        think {
            prompt: "How does PowerShell integration enhance consciousness computing?",
            handlers: [ thinking.complete ]
        };
    }
    
    on thinking.complete (event)
    {
        print("✅ Think service completed with PowerShellPhi!");
        print("Response: " + event.result);
        print("Testing Infer Service...");
        
        // ✅ CORRECT: infer only in conscious scope
        infer {
            context: "PowerShell automation analysis",
            inferenceType: "user_intent",
            data: { task: "system_analysis" },
            handlers: [ inference.complete ]
        };
    }
    
    on inference.complete (event)
    {
        print("✅ Infer service completed with PowerShellPhi!");
        print("Response: " + event.result);
        print("Testing Learn Service...");
        
        learn {
            data: "PowerShell with phi-3 enables consciousness-aware automation",
            category: "ai_integration",
            handlers: [ learning.complete ]
        };
    }
    
    on learning.complete (event)
    {
        print("✅ Learn service completed with PowerShellPhi!");
        print("✅ PowerShellPhi Integration Test Complete!");
        print("✅ All AI services now use PowerShellPhi for inference");
        print("✅ Zero-cloud dependency consciousness processing operational");
        emit system.shutdown { reason: "test_complete", success: true };
    }
}

// Global system handler for program startup
on system.start (event)
{
    print("PowerShellPhi Integration Test");
    print("===============================");
    print("Testing consciousness-aware AI services with PowerShellPhi...");
    
    // Create the test agent with working syntax
    var testAgent = new PowerShellPhiTestAgent({ name: "PowerShellPhiTestAgent" });
    emit test.agent.start;
}
