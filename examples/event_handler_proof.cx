// Simple proof that event handlers receive and execute events

print("ğŸ¯ EVENT HANDLER EXECUTION PROOF");
print("================================");

// Global event handler - should execute when events are emitted
on message.sent (payload)
{
    print("ğŸ“¨ HANDLER EXECUTED: Received message from " + payload.sender);
    print("ğŸ“ Message content: " + payload.content);
    print("â° Processed at: " + payload.timestamp);
    
    if (payload.priority == "high")
    {
        print("ğŸš¨ HIGH PRIORITY MESSAGE DETECTED!");
        emit priority.alert, { 
            originalSender: payload.sender,
            alertLevel: "critical" 
        };
    }
}

// Second handler to prove alert system works
on priority.alert (payload)
{
    print("ğŸ”´ ALERT HANDLER EXECUTED!");
    print("âš ï¸ Critical alert from: " + payload.originalSender);
    print("ğŸ“Š Alert level: " + payload.alertLevel);
}

// Third handler for system events
on system.test (payload)
{
    print("ğŸ”§ SYSTEM HANDLER EXECUTED!");
    print("âœ… System test successful: " + payload.testName);
}

print("ğŸš€ Starting event emission test...");
print("");

// Emit test events to trigger handlers
print("ğŸ“¤ Emitting normal priority message...");
emit message.sent, {
    sender: "TestUser",
    content: "Hello from the event system!",
    timestamp: "2025-01-03T10:30:00",
    priority: "normal"
};

print("");
print("ğŸ“¤ Emitting high priority message...");
emit message.sent, {
    sender: "AdminUser",
    content: "System maintenance required immediately",
    timestamp: "2025-01-03T10:31:00", 
    priority: "high"
};

print("");
print("ğŸ“¤ Emitting system test event...");
emit system.test, {
    testName: "Event Handler Integration Test",
    status: "passed"
};

print("");
print("ğŸ¯ Event emission complete - handlers should have executed above!");
