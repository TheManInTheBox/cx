// Debug Wildcard Matching Test
// Test if any.critical pattern matches system.critical and alerts.critical

print("ğŸ” DEBUG: Testing Wildcard Event Matching");
print("==========================================");

class TestMonitor
{
    name: string;
    
    constructor(agentName)
    {
        this.name = agentName;
    }
    
    // This should match ALL .critical events from any namespace
    on any.critical (payload)
    {
        print("ğŸš¨ " + this.name + " received wildcard critical event!");
        print("   Event should be from ANY namespace (.critical pattern)");
        print("   Payload: " + payload);
    }
    
    // Specific system events for comparison
    on system.critical (payload)
    {
        print("ğŸ–¥ï¸ " + this.name + " received system.critical specifically");
    }
}

try
{
    var monitor = new TestMonitor("WildcardTester");
    
    print("âœ… TestMonitor created with handlers:");
    print("   - any.critical (should match all *.critical events)");
    print("   - system.critical (specific handler)");
    print("");
    
    // Test different namespace critical events
    print("ğŸ“¡ Emitting system.critical...");
    emit system.critical, { source: "system", severity: 9, message: "CPU overload" };
    
    print("ğŸ“¡ Emitting alerts.critical...");
    emit alerts.critical, { source: "alerts", severity: 10, message: "Disk full" };
    
    print("ğŸ“¡ Emitting dev.critical...");
    emit dev.critical, { source: "dev", severity: 8, message: "Build failed" };
    
    print("");
    print("ğŸ¯ EXPECTED BEHAVIOR:");
    print("=====================");
    print("âœ… monitor.any.critical should receive ALL three events");
    print("âœ… monitor.system.critical should receive only system.critical");
    print("âœ… Wildcard pattern 'any.critical' should match:");
    print("   - system.critical âœ“");
    print("   - alerts.critical âœ“"); 
    print("   - dev.critical âœ“");
}
catch (error)
{
    print("âŒ ERROR: " + error);
}
