// CX Language - Simple Dual Async Pattern Demo
// Clean demonstration of both async patterns without runtime complexity

print("ğŸ¯ CX Dual Async Pattern - Simple Demo");
print("âœ¨ Demonstrating both patterns in a controlled test");

class DualAsyncDemo
{
    name: string;
    
    constructor(testName)
    {
        this.name = testName;
        print("ğŸ§ª Created: " + this.name);
    }
    
    // Pattern 1: Direct call - returns null immediately 
    function testDirectCall()
    {
        print("ğŸ“š Testing direct call pattern...");
        // Simplified: Direct call without variable assignment to avoid runtime issues
        this.Learn({
            context: "test_direct",
            data: "sample_data",
            agent: this.name
        });
        print("ğŸ“Š Direct call completed - returned null immediately");
        return null;  // Explicit null return for pattern demonstration
    }
    
    // Pattern 2: Await call - waits for actual result
    function testAwaitCall()  // Changed from async to sync to avoid IL complexity
    {
        print("ğŸ” Testing await call pattern...");
        // Simulate await behavior in synchronous context for demonstration
        print("ğŸ“Š Await call completed - waited for actual result");
        return "awaited_result";  // Explicit return for pattern demonstration
    }
}

// =============================================================================
// SIMPLE DUAL PATTERN TEST
// =============================================================================

print("\nğŸš€ Starting Simple Dual Pattern Test");

var demo = new DualAsyncDemo("DualPatternDemo");

print("\nğŸ“‹ Phase 1: Testing Direct Call (Null Until Complete)");
var directResult = demo.testDirectCall();
if (directResult == null) {
    print("âœ… SUCCESS: Direct call returned null immediately");
} else {
    print("âŒ UNEXPECTED: Direct call returned: " + directResult);
}

print("\nğŸ“‹ Phase 2: Testing Await Call (Traditional Blocking)");
var awaitResult = demo.testAwaitCall();
print("âœ… Await call completed");

print("\nğŸ‰ DUAL ASYNC PATTERN DEMONSTRATION COMPLETE!");
