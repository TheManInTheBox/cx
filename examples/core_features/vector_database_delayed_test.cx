// Vector Database Delayed Search Test  
// Test search after documents have time to be fully embedded

print("â° Testing Vector Database with Embedding Processing Delays\n");

// Simplified event handlers
on ai.learning.complete (payload) 
{
    print("âœ… LEARNED: " + payload.documentId);
}

on ai.search.complete (payload) 
{
    print("ğŸ” SEARCHED: '" + payload.query + "' â†’ " + payload.resultsCount + " results");
    
    if (payload.resultsCount > 0) 
    {
        print("   ğŸ“– TOP RESULT: " + payload.topResult);
    }
}

class DelayedTester
{
    name: string;
    
    constructor(agentName: string) 
    {
        this.name = agentName;
    }
    
    function testWithSimpleContent() 
    {
        print("ğŸ“ Learning very simple test content...");
        
        // Learn extremely simple content that should be easy to find
        this.Learn("Hello World Test");
        this.Learn("Red Car Fast");  
        this.Learn("Blue Sky Beautiful");
        
        print("â³ Learning dispatched - searches should find nothing initially");
        
        // Search immediately (should find nothing)
        this.Search("Hello World");
        this.Search("Red Car");
        this.Search("Blue Sky");
        
        print("âœ… All operations dispatched - watch the timing!");
    }
}

var tester = new DelayedTester("DelayTester");

print("ğŸ§ª Starting Delayed Search Test");
tester.testWithSimpleContent();

print("\nğŸ”‘ Watch the learning vs searching timing patterns...\n");
