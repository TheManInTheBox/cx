// Simple File I/O Test
conscious SimpleFileTest 
{
  realize() 
  {
    emit program.start {};
  }

  on program.start (event) 
  {
    emit system.console.write { text: "Testing file write..." };
    emit system.file.write { 
      path: "test.txt", 
      content: "Hello World!",
      handlers: [write.done]
    };
  }

  on write.done (event) 
  {
    emit system.console.write { text: "Write complete, reading file..." };
    emit system.file.read { 
      path: "test.txt",
      handlers: [read.done]
    };
  }

  on read.done (event) 
  {
    emit system.console.write { text: "File contents: " + event.contents };
    emit system.shutdown { reason: "demo_complete" };
  }
}

new SimpleFileTest();
