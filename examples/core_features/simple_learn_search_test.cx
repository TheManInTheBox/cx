// Simple Learn â†’ Search Test
// Learn something, catch the event, then search for it

print("ğŸ§  Simple Learn â†’ Search Test\n");

// Global agent reference for the search
var testAgent = null;

// Catch learning completion and trigger search
on ai.learning.complete (payload) 
{
    print("âœ… LEARNING COMPLETE: " + payload.documentId);
    print("   Content: " + payload.contentLength + " chars");
    
    // Now search for what we just learned
    if (testAgent != null) 
    {
        print("ğŸ” AUTO-SEARCHING for what we just learned...");
        testAgent.searchForLearned();
    }
    print("");
}

// Show search results
on ai.search.complete (payload) 
{
    print("ğŸ” SEARCH RESULTS:");
    print("   Query: " + payload.query);
    print("   Found: " + payload.resultsCount + " results");
    
    if (payload.resultsCount > 0) 
    {
        print("   ğŸ“š Result: " + payload.topResult);
    }
    else 
    {
        print("   âŒ No results found");
    }
    print("");
}

class TestAgent 
{
    name: string;
    
    constructor(agentName: string) 
    {
        this.name = agentName;
    }
    
    function learnSomething() 
    {
        print("ğŸ“ Learning test content...");
        this.Learn("The quick brown fox jumps over the lazy dog");
    }
    
    function searchForLearned() 
    {
        print("ğŸ” Searching for learned content...");
        this.Search("quick brown fox");
    }
}

// Create agent and test
testAgent = new TestAgent("TestAgent");

print("ğŸ¯ Step 1: Learning content");
testAgent.learnSomething();

print("ğŸ”‘ Press any key to continue...\n");
