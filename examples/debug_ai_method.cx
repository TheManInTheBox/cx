// DEBUG: Test method that calls AI services


print("ğŸ”§ DEBUG: Testing agent method with AI service");

class TestAgent
{
    name: string;
    
    constructor(agentName)
    {
        this.name = agentName;
        print("âœ… Agent created: " + this.name);
    }
    
    function testAiMethod()
    {
        print("ğŸ¤– Starting AI test...");
        
        var response = textGen.GenerateAsync("Say hello!", {
            temperature: 0.7,
            maxTokens: 50
        });
        
        print("âœ… AI Response: " + response);
        return response;
    }
    
    // Class-scoped event handler
    on test.trigger (payload)
    {
        print("ğŸ¯ Event received in class: " + payload);
        var result = this.testAiMethod();
        print("âœ… Event handler completed: " + result);
        emit test.complete, result;
    }
}

// Global event handler to receive completion
on test.complete (payload)
{
    print("ğŸ† Test completed with result: " + payload);
}

try
{
    print("ğŸ¯ Creating agent...");
    var testAgent = agent TestAgent("AI-TEST-AGENT");
    
    print("ğŸ¯ Testing class-scoped event handler...");
    emit test.trigger, "Hello from event system!";
    
    print("ğŸ¯ Testing direct method call...");
    var result = testAgent.testAiMethod();
    print("âœ… Direct method result: " + result);
}
catch (error)
{
    print("âŒ Error: " + error);
}
