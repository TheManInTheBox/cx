// Real Azure OpenAI Realtime API Functional Test
// This demonstrates actual communication with Azure OpenAI, not just prints

class RealtimeApiTest
{
    name: string = "RealtimeTest";
    
    on realtime.connected (event)
    {
        print("ğŸ¯ REAL: Connected to Azure OpenAI - emitting session create");
        emit realtime.session.create { deployment: "gpt-4o-mini-realtime-preview", test: "functional" };
    }
    
    on realtime.session.created (event)
    {
        print("ğŸ¯ REAL: Session created - sending actual text to Azure OpenAI");
        emit realtime.text.send { 
            text: "Hello Azure OpenAI Realtime API! Please respond to confirm this is working.", 
            deployment: "gpt-4o-mini-realtime-preview" 
        };
    }
    
    on realtime.text.response (event)
    {
        print("ğŸ¯ REAL: Received response from Azure OpenAI:");
        print(event.response);
        print("ğŸ¯ REAL: This proves actual Azure OpenAI communication is working!");
        emit test.completed { success: true, response: event.response };
    }
    
    on realtime.session.error (event)
    {
        print("âŒ REAL ERROR from Azure OpenAI:");
        print(event);
    }
    
    function startRealTest()
    {
        print("ğŸ¯ Starting REAL Azure OpenAI Realtime API test...");
        emit realtime.connect { test: "functional", deployment: "gpt-4o-mini-realtime-preview" };
    }
}

on test.completed (event)
{
    if (event.success)
    {
        print("âœ… REAL FUNCTIONALITY CONFIRMED: Azure OpenAI Realtime API working");
        print("âœ… REAL RESPONSE RECEIVED: " + event.response);
    }
}

var realTest = new RealtimeApiTest();
realTest.startRealTest();

print("â³ Waiting for REAL Azure OpenAI response...");
