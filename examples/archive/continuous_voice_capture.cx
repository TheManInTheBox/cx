
print("ğŸ¯ CONTINUOUS VOICE CAPTURE - LIVE EMBODIED INTELLIGENCE");
print("=========================================================");
print("ğŸ¤ This will continuously listen to your microphone");
print("ğŸ¤– Real-time transcription with AI responses");
print("ğŸ›‘ Press Ctrl+C to stop when ready");
print("");

try
{
    print("ğŸš€ Initializing microphone services...");
    
    // Initialize microphone capture
    print("ğŸ¤ Starting microphone capture...");
    micCapture.StartListeningAsync();
    print("âœ… Microphone listening started");
    
    // Initialize live audio processing
    print("ğŸ”„ Starting live audio transcription...");
    liveAudio.StartAsync();
    print("âœ… Live audio processing started");
    
    print("");
    print("ğŸ¯ SYSTEM READY - CONTINUOUS LISTENING ACTIVE!");
    print("===============================================");
    print("ğŸ—£ï¸  Speak into your microphone now");
    print("ğŸ¤– The system will transcribe and respond to everything you say");
    print("â±ï¸  Running continuously until you stop the program...");
    print("");
    
    // Simple continuous loop to keep the program running
    // The microphone services will capture and process audio in the background
    var iteration = 0;
    
    while (true)
    {
        // Status update every 30 seconds
        if (iteration % 30 == 0)
        {
            var status = liveAudio.GetStatusAsync();
            print("ğŸ“Š LIVE STATUS [" + iteration + "s]:");
            print("   ğŸ”„ Active: " + status.IsActive);
            print("   ğŸ¤ Listening: " + status.IsListening);
            print("   ğŸ“ˆ Buffer: " + status.BufferedChunks + " chunks");
            print("   âš¡ Processing: " + status.ProcessingInterval + "ms intervals");
            print("");
            print("ğŸ™ï¸  Continue speaking... (Ctrl+C to stop)");
        }
        
        // Wait 1 second before next iteration
        // This keeps the program alive while services process audio
        System.Threading.Thread.Sleep(1000);
        iteration = iteration + 1;
    }
}
catch (error)
{
    print("âŒ Error in continuous voice capture: " + error);
    
    print("");
    print("ğŸ”‡ Stopping continuous voice capture...");
    
    // Clean shutdown
    liveAudio.StopAsync();
    micCapture.StopListeningAsync();
    
    print("âœ… Voice capture stopped");
    print("ğŸ¯ Live Embodied Intelligence session complete!");
}
