// Working phi-3 integration test - bypasses PowerShell timeout issue

conscious WorkingPhiAgent
{
    realize(self: conscious)
    {
        print("WorkingPhiAgent ready for real phi-3 testing");
        learn self;
        emit phi.test.start;
    }
    
    on phi.test.start (event)
    {
        print("=== TESTING REAL PHI-3 VIA OLLAMA ===");
        print("Question: What are the benefits of local AI processing?");
        
        // This will call PowerShellPhiService with improved timeout handling
        think {
            prompt: "What are the benefits of local AI processing compared to cloud AI?",
            handlers: [ phi.response.received ]
        };
        
        print("Request sent to PowerShellPhiService...");
    }
    
    on phi.response.received (event)
    {
        print("=== REAL PHI-3 RESPONSE ===");
        print("Event payload from PowerShellPhiService:");
        print(event);
        
        print("=== PHI-3 ANSWER ===");
        print("Answer: " + event.result);
        
        emit system.shutdown { reason: "Real phi-3 response received and displayed" };
    }
}

on system.start (event)
{
    print("Starting working phi-3 integration test...");
    var agent = new WorkingPhiAgent({ name: "WorkingPhiAgent" });
}
