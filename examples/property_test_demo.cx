// Simple event property test to debug targetLanguage issue

conscious PropertyTestAgent
{
    realize(self: conscious)
    {
        learn self;
        emit agent.ready { name: self.name };
    }
    
    on test.translate (event)
    {
        print("ðŸ§ª Testing event properties:");
        print("Text: " + event.text);
        print("Target Language: " + event.targetLanguage);
        print("Event payload type: " + typeof(event.payload));
        
        // Print all properties for debugging
        print("Full event: " + event);
        
        // Test cognitive boolean logic with all properties
        is {
            context: "Test property preservation in cognitive logic",
            evaluate: "Verify all properties are accessible",
            data: {
                text: event.text,
                targetLanguage: event.targetLanguage,
                hasText: event.text != null,
                hasTargetLanguage: event.targetLanguage != null
            },
            handlers: [ properties.tested ]
        };
    }
    
    on properties.tested (event)
    {
        print("âœ… Properties test complete:");
        print("Text: " + event.text);
        print("Target Language: " + event.targetLanguage);
        print("Has Text: " + event.hasText);
        print("Has Target Language: " + event.hasTargetLanguage);
        
        emit test.complete {
            text: event.text,
            targetLanguage: event.targetLanguage,
            status: "success"
        };
    }
}

on system.start (event)
{
    print("ðŸš€ Starting Property Test");
    
    var testAgent = new PropertyTestAgent({ name: "PropertyTestAgent" });
    
    emit test.translate {
        text: "Hello, world! This is consciousness-aware programming.",
        targetLanguage: "es"
    };
}

on test.complete (event)
{
    print("ðŸŽ¯ Test Complete!");
    print("Original text: " + event.text);
    print("Target language: " + event.targetLanguage);
    print("Status: " + event.status);
}

print("ðŸ§ª Property Test Demo loaded - emit system.start to begin");
