// Test to manually force activation of Azure Realtime services
// Addresses Issue #159 - Azure OpenAI Realtime API integration

print("=== Azure Realtime Service Activation Test ===");

// Create a simple test to force service activation
class RealtimeActivationAgent
{
    name: string = "RealtimeActivator";
    
    function activateRealtimeServices()
    {
        print("üîß Forcing activation of realtime services...");
        
        // Test if services respond when we force activation
        emit system.activate.realtime { force: true };
        
        // Try different approaches to trigger service instantiation
        emit realtime.service.status { request: "status" };
        emit realtime.debug.activation { test: true };
        
        print("‚úÖ Service activation attempts completed");
    }
    
    on realtime.connected (event)
    {
        print("üéâ REALTIME CONNECTED - Service is working!");
        print(event);
    }
    
    on realtime.session.created (event)
    {
        print("üéâ REALTIME SESSION CREATED - Service is working!");
        print(event);
    }
    
    on realtime.session.error (event)
    {
        print("‚ö†Ô∏è REALTIME SESSION ERROR:");
        print(event);
    }
    
    on realtime.error (event)
    {
        print("‚ùå REALTIME ERROR:");
        print(event);
    }
    
    on system.activate.realtime (event)
    {
        print("üí° System activation request received");
        print("Attempting connection after activation...");
        
        // Try connection after forcing activation
        emit realtime.connect { forced: true, test: "activation" };
        emit realtime.session.create { forced: true, test: "activation" };
    }
}

// Create agent and test
var activator = new RealtimeActivationAgent();

print("\n=== Testing Service Activation ===");
activator.activateRealtimeServices();

print("\n=== Direct Connection Tests ===");
emit realtime.connect { test: "direct", activation: true };
emit realtime.session.create { test: "direct", activation: true };
emit realtime.text.send { text: "Activation test message", test: true };

print("\n=== Activation test complete - waiting for responses ===");
