// 🎮 CORE ENGINEERING TEAM - SIMPLE LOCAL LLM TEST
// Using CORRECT event names that LocalLLMService actually subscribes to
// Dr. Marcus "LocalLLM" Chen + Dr. Sterling IL mastery

conscious SimpleLocalLLMTest
{
    realize(self: conscious)
    {
        learn self;
        emit test.ready { name: self.name };
    }
    
    on test.start (event)
    {
        print("🎮 CORE ENGINEERING TEAM: Simple Local LLM Test");
        print("🧩 Using CORRECT event names for LocalLLMService");
        print("");
        
        // Use the exact event name that LocalLLMService subscribes to
        print("📂 Emitting local.llm.load event...");
        emit local.llm.load { modelPath: "models/llama-3.2-3b-instruct.gguf" };
    }
    
    on local.llm.ready (event)
    {
        print("✅ LocalLLM Service is ready!");
        print("🏗️ Architecture: " + event.architecture);
        print("🌊 Stream Fusion: " + event.streamFusion);
        print("🧩 IL Generation: " + event.ilGeneration);
        
        emit test.start;
    }
    
    on local.llm.model.loaded (event)
    {
        print("✅ Model loaded successfully!");
        print("📂 Model: " + event.modelName);
        print("🔧 Architecture: " + event.architecture);
        print("📊 Size: " + event.sizeBytes + " bytes");
        
        // Test generation with correct event name
        print("");
        print("🧠 Testing generation...");
        emit local.llm.generate { prompt: "Hello world" };
    }
    
    on local.llm.generated (event)
    {
        print("🎯 Generation complete!");
        print("📝 Response: " + event.response);
        
        print("");
        print("🌊 Testing streaming...");
        emit local.llm.stream { prompt: "Count to 5" };
    }
    
    on local.llm.token (event)
    {
        print("🔤 Token: " + event.token);
    }
    
    on local.llm.stream.complete (event)
    {
        print("");
        print("✅ STREAMING COMPLETE!");
        print("🎉 LOCAL LLM IL-GENERATED INFERENCE WORKING!");
        
        emit system.shutdown;
    }
}

// System handlers
on system.shutdown (event)
{
    print("🛑 System shutdown - test complete");
}

// Create and initialize
var test = new SimpleLocalLLMTest({ name: "SimpleLLMTest" });
