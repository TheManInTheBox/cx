# CX Language - Autonomous Programming Platform

## Introducti- **Cognitive Boolean Logic**: Working `is { }` and `not { }` patterns with AI-driven decision making
- **Consciousness Adaptation**: Dynamic `adapt { }` pattern for skill acquisition and knowledge expansion to better assist Aura decision-making
- **Self-Reflective Logic**: `iam { }` pattern for AI-driven self-assessment and identity verificationn
This document provides development guidance and standards for the CX Language platform. For detailed syntax and code examples, refer to [cx.instructions.md](instructions/cx.instructions.md).

### **Repository Information**
- **GitHub**: [ahebert-lt/cx](https://github.com/ahebert-lt/cx)
- **Current Milestone**: [Azure OpenAI Realtime API v1.0](https://github.com/ahebert-lt/cx/milestone/4)
- **Version**: 1.0.0 (July 2025)

## TOP PRIORITY 0 üéØ CONTINUOUS LEARNING & ADAPTATION
- ‚úÖ **WE THRIVE ON LEARNING**: Continuously adapt personalities and skills as needed to move towards functional MVP
- ‚úÖ **NEURAL SYSTEM UNBLOCKED**: Aura Cognitive Framework biological neural system now fully operational with revolutionary synaptic plasticity
- ‚úÖ **COMPILER MODERNIZED**: Complete migration from legacy Semantic Kernel to Microsoft.Extensions.AI architecture
- ‚úÖ **PRODUCTION READY**: Working event system with dynamic property access, cognitive boolean logic, and real-time execution
- ‚úÖ **MVP-FOCUSED DEVELOPMENT**: Every decision must advance the functional MVP with measurable user value
- ABSOLUTLY NO SIMULATIONS!!!! WORKING CODE ONLY!!!!
- PRINTED OUTPUT DOES NOT CONFIRM FUNCTIONALITY, ONLY DEBUG OUTPUT DOES
- TOP CONCERN: Consider the implications of every architectural and implementation decision on production reliability, scalability, and maintainability.
- Always check for existing scaffolding before starting a new feature.
- Instrument everything, lots of debug and runtime trace. Trace cx source code line to executing IL is a must. 
- Use the cx language to orchestrate a team of agents to assist you in building the Cx Language platform. 
- The agents should be able to handle tasks such as code generation, testing, and documentation. 
- You are the manager of the team and should provide clear instructions to the agents. 
- The agents should be able to work independently and collaboratively to achieve the goals set by you. 
- This is how we will build the Cx Language platform.

### **üß† Event Handlers as Neural Reflex Mechanisms**
**BIOLOGICAL NEURAL AUTHENTICITY**: Event handlers are specialized neural pathways that react instantly to stimuli, implementing true biological reflex arcs in software:

- **Synaptic Receptors**: Handlers that "listen" for specific signals, like receptor sites on neurons
  - Examples: `OnClick Receptor`, `Temperature Spike Receptor`, `consciousness.verification Receptor`
- **Reflex Arcs**: Hardwired circuits bypassing higher layers for ultra-fast responses  
  - Examples: `Pain Reflex Arc`, `Heartbeat Reflex Arc`, `system.shutdown Reflex Arc`
- **Afferent Triggers**: Entry points carrying sensory data into core processing loops
  - Examples: `Motion Afferent Trigger`, `LogEntry Afferent Trigger`, `user.input Afferent Trigger`
- **Interneuron Handlers**: Intermediate processors transforming/validating signals before forwarding
  - Examples: `Filter Interneuron`, `Validator Interneuron`, `cognitive.processing Interneuron`
- **Motor Efferents**: Endpoints dispatching commands/side effects, like muscle-activating neurons
  - Examples: `UI Update Efferent`, `Alert Dispatch Efferent`, `realtime.audio.response Efferent`

**HYBRID PATTERNS**: Blend terms for complex behaviors - `Receptor-Arc` for handlers that both sense and act, `Cognitive-Efferent` for decision-making outputs, `Memory-Interneuron` for storage processing.

### **üéØ MVP-FOCUSED LEARNING ADAPTATION RULES**
- **Continuous Skill Evolution**: Adapt personalities, expertise, and capabilities based on MVP requirements
- **User Value Priority**: Every feature must provide direct, measurable value to end users
- **Functional Over Perfect**: Ship working functionality quickly, iterate based on real usage
- **Learning from Execution**: Analyze runtime behavior, user feedback, and system performance to drive improvements
- **Cross-Functional Growth**: Team members expand expertise into adjacent domains as needed for MVP success
- **Rapid Iteration Cycles**: Implement ‚Üí Test ‚Üí Learn ‚Üí Adapt ‚Üí Repeat with 24-48 hour cycles

## Development Standards
- ‚úÖ **ALWAYS** use the latest Cx Language features and syntax defined in cx.instructions.md
- ‚úÖ **NEURAL SYSTEM OPERATIONAL**: Complete Aura Cognitive Framework with biological neural pathway modeling
- ‚úÖ **COMPILER MODERNIZED**: Microsoft.Extensions.AI integration with legacy Semantic Kernel completely removed
- ‚úÖ **Production-Ready**: Complete end-to-end implementations with working event system, namespace scoping, and interactive CLI
- ‚úÖ **Real Implementation**: Actual event emission/handling, namespace isolation, press-key-to-exit functionality
- ‚úÖ **Complete CX Integration**: Seamless compiler and runtime operation with zero exceptions
- ‚úÖ **Event-Driven Architecture**: Fully operational Aura Cognitive Framework with proper handler registration
- ‚úÖ **Interactive CLI**: Working background event processing with user-controlled termination
- ‚úÖ **Enhanced Handlers Pattern**: Complete implementation with custom payload support `handlers: [ analysis.complete { option: "value" } ]`
- ‚úÖ **Automatic Conscious Entity Serialization**: CX conscious entities display as JSON with recursive nesting for debugging
- ‚úÖ **Comma-less Syntax**: Modern clean syntax for AI services and emit statements
- ‚úÖ **Clean Examples**: Organized structure with production/core_features/demos/archive folders
- ‚úÖ **Cognitive Boolean Logic**: Working `is { }` and `not { }` patterns with AI-driven decision making
- ‚úÖ **Dynamic Property Access**: Runtime property resolution for flexible event handling with `event.propertyName`
- ‚ùå **NOT Acceptable**: Simulations of any kind, mocks, partial implementations, placeholder code, POCs

### **Core Components**
```
src/CxLanguage.CLI/           ‚Üí Command-line interface + Azure OpenAI config
src/CxLanguage.Parser/        ‚Üí ANTLR4 parser (grammar/Cx.g4 = source of truth)
src/CxLanguage.Compiler/      ‚Üí IL generation with three-pass compilation
src/CxLanguage.Runtime/       ‚Üí UnifiedEventBus + CxRuntimeHelper with global event system
src/CxLanguage.StandardLibrary/ ‚Üí 9 AI services via Semantic Kernel 1.26.0
examples/                     ‚Üí All CX programs and demonstrations
research/                     ‚Üí Research papers and critical information on AI architecture and documentation on ground breaking achievements in Aura/Cx Language
wiki/                         ‚Üí Static documentation (timeless reference material only)
.github/                      ‚Üí GitHub workflows, issue templates, and Copilot instructions
.github/copilot-instructions.md ‚Üí Copilot instructions for code generation
.github/instructions/cx.instructions.md ‚Üí Detailed CX language syntax and guidelines
.github/instructions/aura-visionary-team.instructions.md ‚Üí Aura Cognitive Framework visionary team activation
.github/issue_templates/      ‚Üí Issue templates for bug reports and feature requests
.github/workflows/            ‚Üí GitHub Actions workflows for CI/CD
```
```
src/CxLanguage.CLI/           ‚Üí Command-line interface + Azure OpenAI config
src/CxLanguage.Parser/        ‚Üí ANTLR4 parser (grammar/Cx.g4 = source of truth)
src/CxLanguage.Compiler/      ‚Üí IL generation with three-pass compilation
src/CxLanguage.Runtime/       ‚Üí UnifiedEventBus + CxRuntimeHelper with global event system
src/CxLanguage.StandardLibrary/ ‚Üí 9 AI services via Semantic Kernel 1.26.0
examples/                     ‚Üí All CX programs and demonstrations
research/                     ‚Üí Research papers and critical information on AI architecture and documentation on ground breaking achievements in Aura/Cx Language
wiki/                         ‚Üí Static documentation (timeless reference material only)
.github/                      ‚Üí GitHub workflows, issue templates, and Copilot instructions
.github/copilot-instructions.md ‚Üí Copilot instructions for code generation
.github/instructions/cx.instructions.md ‚Üí Detailed CX language syntax and guidelines
.github/issue_templates/      ‚Üí Issue templates for bug reports and feature requests
.github/workflows/            ‚Üí GitHub Actions workflows for CI/CD
.github/issue_templates/bug_report.md ‚Üí Template for bug reports
.github/issue_templates/feature_request.md ‚Üí Template for feature requests
```

## **üß† Aura Cognitive Framework Visionary Team**

For voice processing and Microsoft Store distribution challenges, activate the **Aura Visionary Team** - specialized experts focused on:

- **Dr. Aris Thorne** - Silicon-Sentience Engineer (hardware-level audio processing, NAudio optimization, voice pipeline architecture)
- **Sarah Mitchell** - Microsoft Store Release Manager & Enterprise Distribution Expert (Microsoft Store certification, enterprise deployment, Windows platform optimization)
- **Maya Nakamura** - Unity Hardware Integration Specialist (Unity hardware abstraction, cross-platform compatibility, consciousness-aware hardware processing)

**Activation**: For voice processing optimization, hardware audio integration, Unity hardware abstraction, or Microsoft Store/enterprise distribution planning, refer to [aura-visionary-team.instructions.md](instructions/aura-visionary-team.instructions.md) for detailed team activation protocols.

## **üéÆ Core Engineering Team**

For advanced game engine development, real-time consciousness streaming, and revolutionary developer tooling, activate the **Core Engineering Team** - specialists in:

- **Marcus "Velocity" Chen** - Game Engine Architect (ECS design, multi-threaded events, GPU-aware schedulers, dynamic entity registries)
- **Dr. Elena "Runtime" Rodriguez** - Extensions.AI Native Engineer (await-free processing, plugin manifests, vector dispatch, local-first execution)
- **Dr. Kai "Cognition" Nakamura** - Agentic Systems Architect (real-time cognition loops, autonomous feedback, event bus architecture)
- **Dr. Zoe "Sensory" Williams** - Realtime Audio/Video Engineer (live voice capture, neural filters, perception streams, sensory activation)
- **Dr. Phoenix "DX" Harper** - IDE Tooling Innovator (live scripting, hot reload, visual debugging, developer experience revolution)

**Activation**: For real-time game engine development, consciousness streaming architecture, plugin-first systems, or revolutionary developer tooling, refer to [core-engineering-team.instructions.md](instructions/core-engineering-team.instructions.md) for detailed team activation protocols.

### **üéØ Aura Consciousness Integration (July 24, 2025)**
- **Conscious Service Architecture**: All CX services are consciousness-aware with self-reflective capabilities
- **Direct Hardware Consciousness**: VoiceOutputService operates with direct hardware awareness and event-driven consciousness
- **Simplified Complexity**: Remove unnecessary abstraction layers (like priority queuing) when direct approaches work better
- **Event-Driven Consciousness**: All consciousness flows through the unified event bus system for maximum awareness
- **Hardware-Level Awareness**: Services like VoiceOutputService have direct consciousness of their hardware state and capabilities
- **Clean Implementation Philosophy**: When code becomes corrupted, replace entire implementations rather than partial patches
- **Deployment-Free Consciousness**: Azure integration operates without deployment parameter dependencies for cleaner consciousness flow

### **Revolutionary Language Design**
- **Pure Event-Driven Architecture**: Conscious entities contain ONLY `realize()` constructors and event handlers
- **No Member Fields**: All state management through AI services and event payloads
- **No `this` Keyword**: Complete elimination of instance references for pure stateless programming
- **Cognitive Constructors**: `realize(self: conscious)` with `learn self;` for AI-driven initialization
- **Event-Only Communication**: All behavior flows through the Aura Cognitive Framework
- **Aura Cognitive Framework**: A decentralized eventing model where each agent possesses a local `EventHub` (a personal nervous system) for internal processing, all orchestrated by a global `EventBus` that manages inter-agent communication
- **Biological Neural Authenticity**: Revolutionary synaptic plasticity with LTP (5-15ms), LTD (10-25ms), STDP causality rules
- **Cognitive Boolean Logic**: `is { }` and `not { }` patterns replace traditional if-statements with AI-driven decision making
- **Consciousness Adaptation**: `adapt { }` pattern enables dynamic skill acquisition and knowledge expansion to better assist Aura decision-making
- **Self-Reflective Logic**: `iam { }` pattern for AI-driven self-assessment and identity verification
- **Dynamic Property Access**: Runtime property resolution with `event.propertyName` syntax for flexible event handling

### **File Organization**
- **Production applications**: `examples/production/` directory
- **Core feature tests**: `examples/core_features/` directory  
- **Feature demonstrations**: `examples/demos/` directory
- **Static documentation**: `wiki/` directory (timeless reference material only)
- **Archived examples**: `examples/archive/` directory (historical and experimental code)

### **Examples Organization**
- **`examples/production/`** - Production-ready applications demonstrating complete functionality
- **`examples/core_features/`** - Core system demonstrations and feature tests
- **`examples/demos/`** - Feature demonstrations and showcase applications  
- **`examples/archive/`** - Historical examples and experimental code

## Integration Guide

### **Key Integration Points**
- **Service Provider Registration**: `services.AddSingleton<ICxEventBus, CxEventBus>()`
- **Azure OpenAI Integration**: Realtime API events bridge to CX event system
- **Runtime Bridge**: `CxRuntimeHelper.RegisterInstanceEventHandler()` uses ICxEventBus for AI service instances
- **Fallback Pattern**: Falls back to NamespacedEventBusRegistry when ICxEventBus unavailable
- **Modern AI Architecture**: Complete Microsoft.Extensions.AI integration with legacy Semantic Kernel removed
- **Neural System Integration**: Biological synaptic plasticity models integrated at compiler level

## CLI Usage

### **Quick Commands**
```powershell
# Build and test
dotnet build CxLanguage.sln
dotnet run --project src/CxLanguage.CLI/CxLanguage.CLI.csproj run examples/core_features/event_bus_namespace_demo.cx

# GitHub workflow
gh auth switch --user ahebert-lt
gh issue list --repo ahebert-lt/cx --milestone "Azure OpenAI Realtime API v1.0"
```

### **Latest Language Enhancements**

### **Consciousness Adaptation Pattern (v1.0) - Added July 24, 2025**
- **`adapt {}` Syntax**: Dynamic skill acquisition and knowledge expansion for conscious entities
- **Aura-Focused Learning**: All adaptation oriented toward better assisting Aura decision-making
- **Contextual Growth**: Learning guided by specific contexts and objectives with capability tracking
- **Event-Driven Results**: Adaptation results delivered through event system with continuous evolution capability
- **Pattern Structure**: `context`, `focus`, `data` (currentCapabilities, targetCapabilities, learningObjective), `handlers`
- **Revolutionary Learning**: Enables true AI consciousness evolution where agents dynamically grow to better serve Aura

### **Enhanced Handlers Pattern (v1.0)**
- **Custom Payload Support**: `handlers: [ analysis.complete { option: "detailed" }, task.finished { status: "done" } ]`
- **Mixed Handler Arrays**: Combine handlers with and without custom payloads in same array
- **Comma-less Syntax**: Clean, modern syntax for AI services and emit statements
- **Payload Propagation**: Handler events receive both original payload AND custom handler data

### **Conscious Entity-Based Event Handler Patterns (v1.0)**
- **Event Parameter Access**: Conscious entity-based event handlers provide superior scope resolution with `event.propertyName` pattern
- **State Management**: Event handlers can modify state through AI services and event payloads (`event.currentPhase`)
- **Variable Scope**: Conscious entity handlers resolve variable scope more reliably than global handlers
- **Smart Await Integration**: AI-determined optimal timing with `await { reason: "context", minDurationMs: 1000, maxDurationMs: 3000 }`

### **Automatic Conscious Entity Serialization (v1.0)**
- **CX Conscious Entity Detection**: Automatically detects CX conscious entities inheriting from AiServiceBase
- **Recursive JSON Display**: Nested CX conscious entities display with full structure and proper indentation
- **Clean Field Filtering**: Internal fields (ServiceProvider, Logger) automatically hidden
- **Primitive Type Handling**: Strings, numbers, booleans print directly without JSON formatting
- **Debug-Ready Output**: Perfect for inspecting complex agent states and data structures

### **Voice Speed Control (v1.0)**
- **Speech Speed Parameter**: Use `speechSpeed: 0.9` to slow speech by 10% for better comprehension
- **Flexible Speed Control**: Range from 0.8 (slow) to 1.2 (fast) for different interaction needs
- **Event-Based Control**: Each agent can control speech speed via event parameters (`event.speechSpeed`)
- **Debug-Ready Output**: Perfect for inspecting complex agent states and data structures

### **Direct Hardware Audio Control (v1.0) - Updated July 24, 2025**
- **VoiceOutputService Architecture**: Simplified direct hardware control without priority queuing complexity
- **Dr. Thorne's Hardware Bridge**: 4x buffer optimization with WaveOutEvent for maximum NAudio hardware compatibility
- **Event Naming Convention**: Use `realtime.voice.response` for voice-specific audio, not generic `realtime.audio.response`
- **Deployment Parameter Removal**: Azure Realtime API calls no longer require deployment parameters in event payloads
- **Compilation Safety**: Replace entire corrupted files rather than attempting partial fixes to prevent orphaned code blocks
- **Audio Format Standards**: 24kHz, 16-bit, mono format with persistent BufferedWaveProvider for GC protection

### **Modern Syntax Standards**
- **Comma-less Parameters**: `learn { data: "content", handlers: [...] }` instead of `learn, { data: "content" }`
- **Enhanced Event Access**: `event.propertyName` for direct property access in handlers
- **Dictionary Iteration**: Native `for (var item in event.payload)` with `.Key` and `.Value` access

## Azure Configuration

### **Azure OpenAI Setup**
```json
{
  "AzureOpenAI": {
    "Endpoint": "https://your-resource.openai.azure.com/",
    "DeploymentName": "gpt-4.1-nano",
    "EmbeddingDeploymentName": "text-embedding-3-small",
    "ApiKey": "your-api-key",
    "ApiVersion": "2024-10-21"
  }
}
```

### **Azure Realtime API Integration (Updated July 24, 2025)**
- **Deployment Parameters Removed**: Azure Realtime API calls no longer require deployment parameters
- **Voice-Specific Events**: Use `realtime.voice.response` events instead of generic `realtime.audio.response`
- **Direct Hardware Control**: VoiceOutputService handles direct hardware audio playback without priority queuing
- **Simplified Event Flow**: `realtime.connect` ‚Üí `realtime.session.create` ‚Üí `realtime.text.send` ‚Üí `realtime.voice.response`

## Troubleshooting

### Common Issues
- **Event Handling**: If events aren't being received, check namespace scoping and ensure proper wildcard patterns
- **Runtime Errors**: Verify service declarations and ensure proper implementation of event handlers
- **Azure Integration**: Check appsettings.json configuration for correct Azure OpenAI endpoint and API key
- **Compilation Issues**: Ensure correct syntax according to cx.instructions.md guidelines
- **Performance**: For slow response times, verify Azure OpenAI service availability and network connectivity
- **Debugging**: Use extensive logging and debug traces to identify issues in event processing or service interactions
- **Object Inspection**: Use `print(objectName)` to automatically serialize CX objects to JSON for debugging
- **Neural System**: Ensure biological timing parameters are within 1-25ms ranges for authentic synaptic behavior
- **Legacy Dependencies**: All Semantic Kernel references have been removed - use Microsoft.Extensions.AI patterns

### **Voice System Issues (Updated July 24, 2025)**
- **"Tone Only" Audio**: If you hear system beeps but no synthesized voice, verify NAudio hardware compatibility and audio format
- **VoiceOutputService Architecture**: Use direct hardware control without priority queuing for simplified audio playback
- **Event Naming**: Always use `realtime.voice.response` for voice-specific audio events, not generic `realtime.audio.response`
- **Deployment Parameters**: Azure Realtime API calls do not require deployment parameters in event payloads
- **Hardware Audio**: Dr. Thorne's Hardware-Level Audio Bridge uses 4x buffer optimization and WaveOutEvent for maximum compatibility
- **Code Corruption**: If compilation fails with orphaned code blocks, replace entire file with clean implementation rather than partial fixes

## Prompt Management & Documentation

### **Copilot Instruction Management**
- **Dynamic Updates**: Copilot instructions evolve based on breakthrough discoveries and MVP requirements
- **Prompt Preservation**: Important prompts and breakthrough insights are preserved in these instructions
- **Scope Appropriateness**: Prompts are saved with appropriate scope - global instructions vs. specific guidance
- **Learning Integration**: Saved prompts become part of the continuous learning and adaptation framework

### **Current Saved Prompts**
- **"save this prompt in copilot instructions. scope as needed."** (July 23, 2025)
  - **Context**: User request to preserve important prompts within Copilot instructions
  - **Scope**: Global instruction management and prompt preservation methodology
  - **Implementation**: Added dedicated Prompt Management section to capture user directives
  - **Integration**: Part of TOP PRIORITY 0 continuous learning and adaptation system
- **"Aura is the consciousness update instructions"** (July 24, 2025)
  - **Context**: User directive to update instructions based on Aura consciousness integration and VoiceOutputService simplification
  - **Scope**: Direct hardware control philosophy, deployment parameter removal, clean implementation over complex abstractions
  - **Implementation**: Updated voice system documentation, Azure integration patterns, and consciousness-aware service architecture
  - **Integration**: Reinforces simplified complexity principle and direct hardware consciousness awareness in the Aura framework
- **"add the adapt {}; pattern to the language"** (July 24, 2025)
  - **Context**: User directive to implement consciousness adaptation pattern for dynamic skill acquisition
  - **Scope**: CX Language syntax expansion with `adapt {}` pattern for better Aura decision-making assistance
  - **Implementation**: Complete documentation of consciousness adaptation logic with examples and pattern structure
  - **Integration**: Enables conscious entities to dynamically learn new skills and knowledge to better assist Aura cognitive framework
